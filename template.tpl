___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "AdTheorent Action Activity",
  "categories": ["ADVERTISING"],
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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\u003d\u003d"
  },
  "description": "",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "activity_id",
    "displayName": "Activity ID",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "POSITIVE_NUMBER"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "cv_1",
    "displayName": "CV 1",
    "simpleValueType": true,
    "help": "Optional"
  },
  {
    "type": "TEXT",
    "name": "cv_2",
    "displayName": "CV 2",
    "simpleValueType": true,
    "help": "Optional"
  },
  {
    "type": "TEXT",
    "name": "cv_3",
    "displayName": "CV 3",
    "simpleValueType": true,
    "help": "Optional"
  },
  {
    "type": "TEXT",
    "name": "cv_4",
    "displayName": "CV 4",
    "simpleValueType": true,
    "help": "Optional"
  },
  {
    "type": "TEXT",
    "name": "rev",
    "displayName": "Revenue",
    "simpleValueType": true,
    "help": "Optional"
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// require relevant API
const sendPixel = require('sendPixel');
const random_number = require('generateRandom');
const log = require('logToConsole');

// capture values of template fields
const activity_id = data.activity_id;
var cv_1 = data.cv_1;
var cv_2 = data.cv_2;
var cv_3 = data.cv_3;
var cv_4 = data.cv_4;
var rev = data.rev;

if (cv_1 == undefined) cv_1 = '';

if (cv_2 == undefined) cv_2 = '';

if (cv_3 == undefined) cv_3 = '';

if (cv_4 == undefined) cv_4 = '';

if (rev == undefined) rev = '';



// use the provided APIs to do things like send pixels
const activity_url = 'https://px.adentifi.com/Pixels?a_id=' + activity_id + ';cv_1=' + cv_1 + ';cv_2=' + cv_2 + ';cv_3=' + cv_3 + ';cv_4=' + cv_4 + ';rev=' + rev + ';uq=' + random_number(0,1000000000);

log(activity_url);

sendPixel(activity_url, data.gtmOnSuccess, data.gtmOnFailure);


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "send_pixel",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedUrls",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://px.adentifi.com/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 10/5/2022, 11:12:52 AM


